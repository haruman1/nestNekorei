import{r as c,_ as K,R as r,a as C,c as g,P as l,j as e,C as Y,L as B}from"./index-DUYgz4DX.js";import{C as Z}from"./index.esm-BkRuN5E1.js";import{a as V,S as h}from"./sweetalert2.esm.all-CuWp6mgg.js";import{H as $}from"./Helmet-BCsUD1--.js";import{a as _}from"./CContainer-GNVW4D65.js";import{C as A,a as L}from"./CRow-NYYQzLSh.js";import{C as G,a as O}from"./CCardBody-DdTLzXxm.js";import{C as ee,a as z}from"./CForm-xcLaIdfQ.js";import{C as H,a as q}from"./CInputGroupText-CBVmoem7.js";import{C as D,a as Q,b as J}from"./CFormInput-D4p5AKqz.js";import{c as ae}from"./cil-lock-locked-DmxpJbVL.js";import{u as re}from"./Transition-B8X7oyuP.js";import{C as N}from"./CButton-9FYNAaZ7.js";var T=c.forwardRef(function(a,f){var m=a.children,s=a.className,b=K(a,["children","className"]);return r.createElement("div",C({className:g("card-group",s)},b,{ref:f}),m)});T.propTypes={children:l.node,className:l.string};T.displayName="CCardGroup";var M=c.forwardRef(function(a,f){var m=a.className,s=a.button,b=a.feedback,k=a.feedbackInvalid,E=a.feedbackValid,x=a.floatingLabel,v=a.tooltipFeedback,j=a.hitArea,d=a.id,t=a.indeterminate,i=a.inline,n=a.invalid,o=a.label,u=a.reverse,p=a.type,U=p===void 0?"checkbox":p,S=a.valid,R=K(a,["className","button","feedback","feedbackInvalid","feedbackValid","floatingLabel","tooltipFeedback","hitArea","id","indeterminate","inline","invalid","label","reverse","type","valid"]),y=c.useRef(null),W=re(f,y);c.useEffect(function(){y.current&&t&&(y.current.indeterminate=t)},[t,y.current]);var w=function(){return r.createElement("input",C({type:U,className:g(s?"btn-check":"form-check-input",{"is-invalid":n,"is-valid":S,"me-2":j}),id:d},R,{ref:W}))},F=function(){return r.createElement(Q,{describedby:R["aria-describedby"],feedback:b,feedbackInvalid:k,feedbackValid:E,floatingLabel:x,invalid:n,tooltipFeedback:v,valid:S})},P=function(){var I;return r.createElement(D,C({customClassName:g(s?g("btn",s.variant?"btn-".concat(s.variant,"-").concat(s.color):"btn-".concat(s.color),(I={},I["btn-".concat(s.size)]=s.size,I),"".concat(s.shape)):"form-check-label")},d&&{htmlFor:d}),o)},X=function(){return s?r.createElement(r.Fragment,null,r.createElement(w,null),o&&r.createElement(P,null),r.createElement(F,null)):o?j?r.createElement(r.Fragment,null,r.createElement(w,null),r.createElement(D,C({customClassName:g("form-check-label stretched-link",m)},d&&{htmlFor:d}),o),r.createElement(F,null)):r.createElement("div",{className:g("form-check",{"form-check-inline":i,"form-check-reverse":u,"is-invalid":n,"is-valid":S},m)},r.createElement(w,null),r.createElement(P,null),r.createElement(F,null)):r.createElement(w,null)};return r.createElement(X,null)});M.propTypes=C({button:l.object,className:l.string,hitArea:l.oneOf(["full"]),id:l.string,indeterminate:l.bool,inline:l.bool,label:l.oneOfType([l.string,l.node]),reverse:l.bool,type:l.oneOf(["checkbox","radio"])},Q.propTypes);M.displayName="CFormCheck";const be=()=>{const[a,f]=c.useState({email:"",password:"",rememberMe:!1}),[m,s]=c.useState(null),[b,k]=c.useState(null),[E,x]=c.useState(!1);c.useEffect(()=>{const t=localStorage.getItem("email"),i=localStorage.getItem("password"),n=localStorage.getItem("rememberMe")==="true";n&&f(o=>({...o,email:t||"",password:i||"",rememberMe:n}))},[]);const v=t=>{const{id:i,value:n,type:o,checked:u}=t.target;f(p=>({...p,[i]:o==="checkbox"?u:n}))},j=async()=>{const{email:t,password:i,rememberMe:n}=a;if(!t||!i){s("Silahkan isi semua kolom dengan benar."),k(null);return}x(!0),s(null);try{const o=await V.post("http://localhost:3001/users/login",{email:t,password:i});o.status===201&&(localStorage.setItem("authToken",o.data.access_token),n?(localStorage.setItem("email",t),localStorage.setItem("password",i),localStorage.setItem("rememberMe","true")):(localStorage.removeItem("email"),localStorage.removeItem("password"),localStorage.removeItem("rememberMe")),h.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:p=>{p.onmouseenter=h.stopTimer,p.onmouseleave=h.resumeTimer}}).fire({icon:"success",title:"Login berhasil"}),setTimeout(()=>{x(!1),window.location.href="/#/dashboard"},3e3))}catch(o){x(!1),s(o.response.data.message),k(null)}},d=()=>{h.fire({title:"Enter your email address",input:"email",inputPlaceholder:"Enter your email",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",preConfirm:t=>(t||h.showValidationMessage("Please enter a valid email address."),t)}).then(async t=>{var i,n;if(t.isConfirmed){const o=t.value;try{(await V.post("http://localhost:3001/users/forgot-password",{email:o})).status===200&&h.fire("Success","Please check your email for password reset instructions.","success")}catch(u){h.fire("Error",((n=(i=u.response)==null?void 0:i.data)==null?void 0:n.message)||"Failed to send password reset email","error")}}})};return e.jsxs(e.Fragment,{children:[e.jsxs($,{children:[e.jsx("title",{children:"Login - Nekorei Management"}),e.jsx("meta",{name:"description",content:"Login Page yang tersedia di Nekoreishion Management"})]}),e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(_,{children:e.jsx(A,{className:"justify-content-center",children:e.jsx(L,{md:8,children:e.jsxs(T,{children:[e.jsx(G,{className:"p-4",children:e.jsx(O,{children:e.jsxs(ee,{children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),m&&e.jsx(z,{color:"danger",children:m}),b&&e.jsx(z,{color:"success",children:b}),e.jsxs(H,{className:"mb-3",children:[e.jsx(q,{children:"@"}),e.jsx(J,{id:"email",floatingLabel:"Email address",placeholder:"Email",autoComplete:"email",value:a.email,onChange:v})]}),e.jsxs(H,{className:"mb-4",children:[e.jsx(q,{children:e.jsx(Z,{icon:ae})}),e.jsx(J,{id:"password",floatingLabel:"Password anda",type:"password",placeholder:"Password",autoComplete:"current-password",value:a.password,onChange:v})]}),e.jsx(M,{id:"rememberMe",label:"Remember Me",checked:a.rememberMe,onChange:v}),e.jsxs(A,{className:"mt-3",children:[e.jsx(L,{xs:6,children:E?e.jsx("div",{className:"text-center",children:e.jsx(Y,{color:"primary"})}):e.jsx(N,{color:"primary",onClick:j,children:"Login"})}),e.jsx(L,{xs:6,className:"text-right",children:e.jsx(N,{color:"link",className:"px-0",onClick:d,children:"Forgot password?"})})]})]})})}),e.jsx(G,{className:"text-white bg-primary py-5",style:{width:"44%"},children:e.jsx(O,{className:"text-center",children:e.jsxs("div",{children:[e.jsx("h2",{children:"Sign up"}),e.jsx("p",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}),e.jsx(B,{to:"/auth/register",children:e.jsx(N,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,children:"Register Now!"})}),e.jsx(B,{to:"/",children:e.jsx(N,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,children:"Back to menu Now!"})})]})})})]})})})})})]})};export{be as default};
