import{r as d,_ as K,R as a,a as C,c as g,P as l,j as e,C as X,L as V}from"./index-BxegOxZp.js";import{C as Y}from"./index.esm-mMwDcLoS.js";import{a as A,S as h}from"./sweetalert2.esm.all-Dl2JiWyO.js";import{H as Z}from"./Helmet-xFKRRjvr.js";import{a as _,b as E}from"./CContainer-B_sSYCtY.js";import{C as G,a as R}from"./CRow-2QZVwYgJ.js";import{C as O,a as z}from"./CCardBody-D6oxODFr.js";import{C as ee}from"./CForm-BVylGshM.js";import{C as H}from"./CAlert-DkWVtKnM.js";import{C as q,a as D}from"./CInputGroupText-DfytD8rZ.js";import{C as $,a as Q,b as J}from"./CFormInput-C1hi2ZkX.js";import{c as re}from"./cil-lock-locked-DmxpJbVL.js";import{u as ae}from"./Transition-Cqi6SL1v.js";var T=d.forwardRef(function(r,f){var u=r.children,s=r.className,b=K(r,["children","className"]);return a.createElement("div",C({className:g("card-group",s)},b,{ref:f}),u)});T.propTypes={children:l.node,className:l.string};T.displayName="CCardGroup";var M=d.forwardRef(function(r,f){var u=r.className,s=r.button,b=r.feedback,k=r.feedbackInvalid,S=r.feedbackValid,x=r.floatingLabel,v=r.tooltipFeedback,j=r.hitArea,p=r.id,t=r.indeterminate,i=r.inline,o=r.invalid,n=r.label,m=r.reverse,c=r.type,y=c===void 0?"checkbox":c,F=r.valid,P=K(r,["className","button","feedback","feedbackInvalid","feedbackValid","floatingLabel","tooltipFeedback","hitArea","id","indeterminate","inline","invalid","label","reverse","type","valid"]),w=d.useRef(null),U=ae(f,w);d.useEffect(function(){w.current&&t&&(w.current.indeterminate=t)},[t,w.current]);var N=function(){return a.createElement("input",C({type:y,className:g(s?"btn-check":"form-check-input",{"is-invalid":o,"is-valid":F,"me-2":j}),id:p},P,{ref:U}))},L=function(){return a.createElement(Q,{describedby:P["aria-describedby"],feedback:b,feedbackInvalid:k,feedbackValid:S,floatingLabel:x,invalid:o,tooltipFeedback:v,valid:F})},B=function(){var I;return a.createElement($,C({customClassName:g(s?g("btn",s.variant?"btn-".concat(s.variant,"-").concat(s.color):"btn-".concat(s.color),(I={},I["btn-".concat(s.size)]=s.size,I),"".concat(s.shape)):"form-check-label")},p&&{htmlFor:p}),n)},W=function(){return s?a.createElement(a.Fragment,null,a.createElement(N,null),n&&a.createElement(B,null),a.createElement(L,null)):n?j?a.createElement(a.Fragment,null,a.createElement(N,null),a.createElement($,C({customClassName:g("form-check-label stretched-link",u)},p&&{htmlFor:p}),n),a.createElement(L,null)):a.createElement("div",{className:g("form-check",{"form-check-inline":i,"form-check-reverse":m,"is-invalid":o,"is-valid":F},u)},a.createElement(N,null),a.createElement(B,null),a.createElement(L,null)):a.createElement(N,null)};return a.createElement(W,null)});M.propTypes=C({button:l.object,className:l.string,hitArea:l.oneOf(["full"]),id:l.string,indeterminate:l.bool,inline:l.bool,label:l.oneOfType([l.string,l.node]),reverse:l.bool,type:l.oneOf(["checkbox","radio"])},Q.propTypes);M.displayName="CFormCheck";const be=()=>{const[r,f]=d.useState({email:"",password:"",rememberMe:!1}),[u,s]=d.useState(null),[b,k]=d.useState(null),[S,x]=d.useState(!1);d.useEffect(()=>{const t=localStorage.getItem("email"),i=localStorage.getItem("password"),o=localStorage.getItem("rememberMe")==="true";o&&f(n=>({...n,email:t||"",password:i||"",rememberMe:o}))},[]);const v=t=>{const{id:i,value:o,type:n,checked:m}=t.target;f(c=>({...c,[i]:n==="checkbox"?m:o}))},j=async()=>{var n,m;const{email:t,password:i,rememberMe:o}=r;if(!t||!i){s("Silahkan isi semua kolom dengan benar."),k(null);return}x(!0),s(null);try{const c=await A.post("http://localhost:3001/users/login",{email:t,password:i});c.status===201&&(localStorage.setItem("authToken",c.data.access_token),o?(localStorage.setItem("email",t),localStorage.setItem("password",i),localStorage.setItem("rememberMe","true")):(localStorage.removeItem("email"),localStorage.removeItem("password"),localStorage.removeItem("rememberMe")),h.fire({icon:"success",title:"Login berhasil",toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:y=>{y.addEventListener("mouseenter",h.stopTimer),y.addEventListener("mouseleave",h.resumeTimer)}}),setTimeout(()=>{x(!1),window.location.href="/#/dashboard"},3e3))}catch(c){console.error("Login Error:",c),x(!1),s(((m=(n=c.response)==null?void 0:n.data)==null?void 0:m.message)||"Terjadi kesalahan pada server."),k(null)}},p=()=>{h.fire({title:"Enter your email address",input:"email",inputPlaceholder:"Enter your email",showCancelButton:!0,confirmButtonText:"Submit",cancelButtonText:"Cancel",preConfirm:t=>(t||h.showValidationMessage("Please enter a valid email address."),t)}).then(async t=>{var i,o;if(t.isConfirmed){const n=t.value;try{(await A.post("http://localhost:3001/users/forgot-password",{email:n})).status===200&&h.fire("Success","Please check your email for password reset instructions.","success")}catch(m){h.fire("Error",((o=(i=m.response)==null?void 0:i.data)==null?void 0:o.message)||"Failed to send password reset email","error")}}})};return e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx("title",{children:"Login - Nekorei Management"}),e.jsx("meta",{name:"description",content:"Login Page yang tersedia di Nekoreishion Management"})]}),e.jsx("div",{className:"bg-body-tertiary min-vh-100 d-flex flex-row align-items-center",children:e.jsx(_,{children:e.jsx(G,{className:"justify-content-center",children:e.jsx(R,{md:8,children:e.jsxs(T,{children:[e.jsx(O,{className:"p-4",children:e.jsx(z,{children:e.jsxs(ee,{children:[e.jsx("h1",{children:"Login"}),e.jsx("p",{className:"text-body-secondary",children:"Sign In to your account"}),u&&e.jsx(H,{color:"danger",children:u}),b&&e.jsx(H,{color:"success",children:b}),e.jsxs(q,{className:"mb-3",children:[e.jsx(D,{children:"@"}),e.jsx(J,{id:"email",floatingLabel:"Email address",placeholder:"Email",autoComplete:"email",value:r.email,onChange:v})]}),e.jsxs(q,{className:"mb-4",children:[e.jsx(D,{children:e.jsx(Y,{icon:re})}),e.jsx(J,{id:"password",floatingLabel:"Password anda",type:"password",placeholder:"Password",autoComplete:"current-password",value:r.password,onChange:v})]}),e.jsx(M,{id:"rememberMe",label:"Remember Me",checked:r.rememberMe,onChange:v}),e.jsxs(G,{className:"mt-3",children:[e.jsx(R,{xs:6,children:S?e.jsx("div",{className:"text-center",children:e.jsx(X,{color:"primary"})}):e.jsx(E,{color:"primary",onClick:j,children:"Login"})}),e.jsx(R,{xs:6,className:"text-right",children:e.jsx(E,{color:"link",className:"px-0",onClick:p,children:"Forgot password?"})})]})]})})}),e.jsx(O,{className:"text-white bg-primary py-5",style:{width:"44%"},children:e.jsx(z,{className:"text-center",children:e.jsxs("div",{children:[e.jsx("h2",{children:"Sign up"}),e.jsx("p",{children:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua."}),e.jsx(V,{to:"/auth/register",children:e.jsx(E,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,children:"Register Now!"})}),e.jsx(V,{to:"/",children:e.jsx(E,{color:"primary",className:"mt-3",active:!0,tabIndex:-1,children:"Back to menu Now!"})})]})})})]})})})})})]})};export{be as default};
