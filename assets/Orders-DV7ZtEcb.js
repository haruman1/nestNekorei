import{r as a,_ as le,R as C,a as P,c as ce,P as r,o as de,m as ue,j as e}from"./index-BxegOxZp.js";import{C as me}from"./index.esm-mMwDcLoS.js";import{a as fe,S as he}from"./sweetalert2.esm.all-Dl2JiWyO.js";import{a as pe,b as p}from"./CContainer-B_sSYCtY.js";import{C as B,a as j}from"./CRow-2QZVwYgJ.js";import{C as xe,a as ye}from"./CCardBody-D6oxODFr.js";import{C as Ce}from"./CCardImage-CYFNJRbL.js";import{C as je,a as be}from"./CCardTitle-Dq6ckUuZ.js";import{i as ee,u as ve,j as ge}from"./CNavLink-Bf4a02ls.js";import{u as ke}from"./Transition-Cqi6SL1v.js";import{C as te}from"./CForm-BVylGshM.js";import{b as A,C as U}from"./CFormInput-C1hi2ZkX.js";import{C as z,a as Y,b as Z,c as J,d as Q}from"./CModalTitle-DQUrDazB.js";import{C as Pe,a as Te,b as ne,c as I,d as Se,e as V}from"./CTable-B2XDJXEl.js";import"./DefaultLayout-BYwQMz-r.js";import"./cil-user-Ddrdy7PS.js";import"./isInViewport-BGGX6NGH.js";var we=function(n){if(!n)return 0;var i=window.getComputedStyle(n),o=i.transitionDuration,s=i.transitionDelay,d=Number.parseFloat(o),u=Number.parseFloat(s);return!d&&!u?0:(o=o.split(",")[0],s=s.split(",")[0],(Number.parseFloat(o)+Number.parseFloat(s))*1e3)},ae=function(n){typeof n=="function"&&n()},Ne=function(n){n.dispatchEvent(new Event("transitionend"))},Ee=function(n,i,o){if(o===void 0&&(o=!0),!o){ae(n);return}var s=5,d=we(i)+s,u=!1,x=function(m){var y=m.target;y===i&&(u=!0,i.removeEventListener("transitionend",x),ae(n))};i.addEventListener("transitionend",x),setTimeout(function(){u||Ne(i)},d)},De=function(n,i){switch(n){case"right":return ee(i)?"left":"right";case"left":return ee(i)?"right":"left";default:return n}},K=a.forwardRef(function(n,i){var o=n.children,s=n.animation,d=s===void 0?!0:s,u=n.className,x=n.container,m=n.content,y=n.delay,b=y===void 0?0:y,v=n.fallbackPlacements,L=v===void 0?["top","right","bottom","left"]:v,g=n.offset,T=g===void 0?[0,6]:g,E=n.onHide,k=n.onShow,D=n.placement,R=D===void 0?"top":D,M=n.trigger,l=M===void 0?["hover","focus"]:M,S=n.visible,w=le(n,["children","animation","className","container","content","delay","fallbackPlacements","offset","onHide","onShow","placement","trigger","visible"]),f=a.useRef(null),t=a.useRef(null),c=ke(i,f),h="tooltip".concat(a.useId()),q=a.useState(!1),H=q[0],G=q[1],W=a.useState(S),N=W[0],X=W[1],_=ve(),re=_.initPopper,ie=_.destroyPopper,se=_.updatePopper,$=typeof b=="number"?{show:b,hide:b}:b,oe={modifiers:[{name:"arrow",options:{element:".tooltip-arrow"}},{name:"flip",options:{fallbackPlacements:L}},{name:"offset",options:{offset:T}}],placement:De(R,t.current)};a.useEffect(function(){if(S){O();return}F()},[S]),a.useEffect(function(){if(H&&t.current&&f.current){re(t.current,f.current,oe),setTimeout(function(){X(!0)},$.show);return}!H&&t.current&&f.current&&ie()},[H]),a.useEffect(function(){!N&&t.current&&f.current&&Ee(function(){G(!1)},f.current)},[N]);var O=function(){G(!0),k&&k()},F=function(){setTimeout(function(){X(!1),E&&E()},$.hide)};return a.useEffect(function(){se()},[m]),C.createElement(C.Fragment,null,C.cloneElement(o,P(P(P(P(P({},N&&{"aria-describedby":h}),{ref:t}),(l==="click"||l.includes("click"))&&{onClick:function(){return N?F():O()}}),(l==="focus"||l.includes("focus"))&&{onFocus:function(){return O()},onBlur:function(){return F()}}),(l==="hover"||l.includes("hover"))&&{onMouseEnter:function(){return O()},onMouseLeave:function(){return F()}})),C.createElement(ge,{container:x,portal:!0},H&&C.createElement("div",P({className:ce("tooltip","bs-tooltip-auto",{fade:d,show:N},u),id:h,ref:c,role:"tooltip"},w),C.createElement("div",{className:"tooltip-arrow"}),C.createElement("div",{className:"tooltip-inner"},m))))});K.propTypes={animation:r.bool,children:r.node,container:r.any,content:r.oneOfType([r.string,r.node]),delay:r.oneOfType([r.number,r.shape({show:r.number.isRequired,hide:r.number.isRequired})]),fallbackPlacements:de,offset:r.any,onHide:r.func,onShow:r.func,placement:r.oneOf(["auto","top","right","bottom","left"]),trigger:ue,visible:r.bool};K.displayName="CTooltip";var Re=["512 512","<rect width='34.924' height='34.924' x='256' y='95.998' fill='var(--ci-primary-color, currentColor)' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M16,496H496V16H16ZM48,48H464V464H48Z' class='ci-primary'/><path fill='var(--ci-primary-color, currentColor)' d='M285.313,359.032a18.123,18.123,0,0,1-15.6,8.966,18.061,18.061,0,0,1-17.327-23.157l35.67-121.277A49.577,49.577,0,0,0,194.7,190.572l-11.718,28.234,29.557,12.266,11.718-28.235a17.577,17.577,0,0,1,33.1,11.7l-35.67,121.277A50.061,50.061,0,0,0,269.709,400a50.227,50.227,0,0,0,43.25-24.853l15.1-25.913-27.646-16.115Z' class='ci-primary'/>"];function Ke(){const[n,i]=a.useState(!0),o=async()=>{i(!0);try{const t=await fe.get("http://localhost:3001/products",{headers:{Authorization:"Bearer "+localStorage.getItem("authToken")}});if(t.data.status===200){const c=t.data.data;d(c)}}catch(t){console.error("Error fetching data:",t)}},[s,d]=a.useState([]),[u,x]=a.useState(!1),[m,y]=a.useState(null),[b,v]=a.useState(!1),[L,g]=a.useState(!1),[T,E]=a.useState({name:"",email:"",phone:""}),k=(t,c)=>{d(s.map(h=>h.id===t?{...h,quantity:c}:h))},D=t=>{y(t),x(!0)},R=()=>{x(!1),y(null)},M=()=>{v(!0)},l=()=>{v(!1)},S=()=>{v(!1),g(!0)},w=t=>{const{name:c,value:h}=t.target;E(q=>({...q,[c]:h}))};a.useEffect(()=>{o()},[]);const f=()=>{window.snap.pay("YOUR_TRANSACTION_TOKEN",{onSuccess:function(t){alert("Payment success!"),console.log(t)},onPending:function(t){alert("Payment pending."),console.log(t)},onError:function(t){alert("Payment error."),console.log(t)},onClose:function(){he.fire({title:"Mau membatalkan pembayaran?",text:"Jika lakukan pembatalan pembayaran, silahkan check history pesanan anda",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yah, batalkan pesanan"})}})};return e.jsxs(pe,{className:"mt-4",children:[e.jsx(B,{className:"justify-content-center",children:s.map(t=>e.jsx(j,{xs:"12",sm:"6",md:"3",className:"mb-4",children:e.jsxs(xe,{children:[e.jsx(Ce,{orientation:"top",size:"md",src:t.image,className:"p-4",style:{border:"1px solid black",textAlign:"center",width:"100%",height:"200px",objectFit:"cover"}}),e.jsxs(ye,{children:[e.jsxs(B,{children:[e.jsxs(j,{children:[e.jsx(je,{children:t.name}),e.jsx(be,{children:t.price})]}),e.jsx(j,{xs:"auto",children:e.jsx(K,{content:"Lihat Detail Produk ",children:e.jsx(me,{icon:Re,size:"xl",style:{cursor:"pointer",color:"blue"},onClick:()=>D(t)})})})]}),e.jsxs(te,{className:"mt-2",children:[e.jsxs(B,{className:"justify-content-center align-items-center",children:[e.jsx(j,{xs:"auto",children:e.jsx(p,{color:"secondary",onClick:()=>k(t.id,t.quantity-1),disabled:t.quantity<=1||t.quantity===0,children:"<"})}),e.jsx(j,{xs:"auto",children:e.jsx(A,{type:"number",value:t.quantity,onChange:c=>k(t.id,parseInt(c.target.value)||1),style:{width:"100px",textAlign:"center"},disabled:t.quantity===0})}),e.jsx(j,{xs:"auto",children:e.jsx(p,{color:"secondary",onClick:()=>k(t.id,t.quantity+1),disabled:t.quantity>=t.maxQuantity||t.quantity===0,children:">"})})]}),t.quantity===0&&e.jsx("p",{style:{color:"red",textAlign:"center"},children:"Stok habis - tidak bisa dipesan"})]})]})]})},t.id))}),e.jsx(B,{className:"justify-content-center mt-4",children:e.jsx(j,{xs:"auto",children:e.jsx(p,{color:"primary",onClick:M,children:"Submit Order"})})}),m&&e.jsxs(z,{backdrop:"static",visible:u,onClose:R,children:[e.jsx(Y,{children:e.jsxs(Z,{children:["Detail ",m.name]})}),e.jsx(J,{children:e.jsx("p",{children:m.description})}),e.jsx(Q,{children:e.jsx(p,{color:"secondary",onClick:R,children:"Close"})})]}),e.jsxs(z,{backdrop:"static",visible:b,onClose:l,children:[e.jsx(Y,{children:e.jsx(Z,{children:"Order Summary"})}),e.jsx(J,{children:e.jsxs(Pe,{children:[e.jsx(Te,{children:e.jsxs(ne,{children:[e.jsx(I,{children:"Nama Produk"}),e.jsx(I,{children:"Harga"}),e.jsx(I,{children:"Jumlah"}),e.jsx(I,{children:"Total"})]})}),e.jsx(Se,{children:s.filter(t=>t.quantity>0).map(t=>e.jsxs(ne,{children:[e.jsx(V,{children:t.name}),e.jsx(V,{children:t.price}),e.jsx(V,{children:t.quantity}),e.jsxs(V,{children:["Rp",parseInt(t.price.replace("Rp","").replace(",",""))*t.quantity,",000"]})]},t.id))})]})}),e.jsxs(Q,{children:[e.jsx(p,{color:"primary",onClick:S,children:"Masukkan Pesanan"}),e.jsx(p,{color:"secondary",onClick:l,children:"Close"})]})]}),e.jsxs(z,{backdrop:"static",visible:L,onClose:()=>g(!1),children:[e.jsx(Y,{children:e.jsx(Z,{children:"Enter Your Details"})}),e.jsx(J,{children:e.jsxs(te,{children:[e.jsx(U,{children:"Name"}),e.jsx(A,{type:"text",name:"name",value:T.name,onChange:w}),e.jsx(U,{children:"Email"}),e.jsx(A,{type:"email",name:"email",value:T.email,onChange:w}),e.jsx(U,{children:"Phone Number"}),e.jsx(A,{type:"text",name:"phone",value:T.phone,onChange:w})]})}),e.jsxs(Q,{children:[e.jsx(p,{color:"primary",onClick:f,children:"Pesan"}),e.jsx(p,{color:"secondary",onClick:()=>g(!1),children:"Close"})]})]})]})}export{Ke as default};
