import{r,j as e,C as F}from"./index-BxegOxZp.js";import"./imagekitio-react.esm-BdK5uceq.js";import{a as u}from"./sweetalert2.esm.all-Dl2JiWyO.js";import{F as T}from"./FileUploaderInline-3fPmcOmO-DD4aVvYN.js";import{H as v}from"./Helmet-xFKRRjvr.js";import{a as B,b as I}from"./CContainer-B_sSYCtY.js";import{C as n,a as o}from"./CRow-2QZVwYgJ.js";import{C as L,a as z}from"./CCardBody-D6oxODFr.js";import{C as h}from"./CAlert-DkWVtKnM.js";import{C as A}from"./CForm-BVylGshM.js";import{C as g,b as H}from"./CFormInput-C1hi2ZkX.js";import"./Transition-Cqi6SL1v.js";const W=()=>{const[l,p]=r.useState(""),[c,x]=r.useState(""),[C,f]=r.useState(""),[j,y]=r.useState(""),[i,m]=r.useState(null),[S,d]=r.useState(null),[b,t]=r.useState(!1),k=async()=>{(!l||!c)&&(t(!0),m("Silahkan isi semua kolom dengan benar."),d(null)),t(!0);const a={name:l,image:c};u.post("http://localhost:3001/products/categories",a,{headers:{Authorization:"Bearer "+localStorage.getItem("authToken")}}).then(s=>{s.status===201&&(t(!1),d("Category berhasil ditambahkan."),U(s.data))}).catch(s=>{t(!1),m(s.response)})},E=a=>{console.log("Error",a)},U=a=>{t(!1),console.log("Success",a)},N=async()=>{u.get("http://localhost:3001/users/image/upload").then(a=>{if(a.status===200){const s=a.data;f(s.secureSignature),y(s.secureExpire),console.log(s)}}).catch(a=>{E("Error fetching signature:")})};return r.useEffect(()=>{N()},[]),e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx("title",{children:"Tambah Category | Nekoreishion Management"})}),e.jsx(B,{children:e.jsx(n,{className:"justify-content-center",children:e.jsx(o,{md:8,children:e.jsx(L,{children:e.jsxs(z,{children:[e.jsx("h3",{className:"mb-4",children:"Tambah Categories"}),S&&e.jsx(h,{color:"success",children:"Category berhasil ditambahkan!"}),i&&e.jsx(h,{color:"danger",children:i}),e.jsxs(A,{children:[e.jsx(n,{className:"mb-3",children:e.jsxs(o,{md:6,children:[e.jsx(g,{htmlFor:"name",children:"Nama Category"}),e.jsx(H,{type:"text",id:"name",placeholder:"Masukkan nama produk",value:l,onChange:a=>p(a.target.value)})]})}),e.jsx(n,{className:"mb-3",children:e.jsxs(o,{md:12,children:[e.jsx(g,{children:"Unggah Gambar Category Produk"}),e.jsx(T,{pubkey:"ff2ab64366bd0dd50104",maxLocalFileSizeBytes:2e6,multiple:!1,sourceList:"local, url, gdrive",useCloudImageEditor:!1,secureSignature:C,secureExpire:j,onFileUploadStart:()=>t(!0),classNameUploader:"my-config uc-auto",onFileUploadSuccess:a=>{t(!1),x(a.uuid),console.log(a)}})]})}),e.jsx(o,{xs:6,children:b?e.jsx("div",{className:"text-center",children:e.jsx(F,{color:"primary"})}):e.jsx(I,{color:"primary",onClick:k,children:"Tambah Category"})})]})]})})})})})]})};export{W as default};
