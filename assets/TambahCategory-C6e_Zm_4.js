import{r,j as e,C as F}from"./index-DsVamXnW.js";import"./imagekitio-react.esm-CMIy3oW-.js";import{a as u}from"./sweetalert2.esm.all-CJaJeW5u.js";import{v}from"./FileUploaderInline-Bh2g56u4-vqgctLJZ.js";import{H as T}from"./Helmet-DiQ4eAka.js";import{a as z}from"./CContainer-kqqaBj-4.js";import{C as l,a as o}from"./CRow-CkeaoEIw.js";import{C as B,a as I}from"./CCardBody-PrrWRnlc.js";import{a as h,C as L}from"./CForm-1cRRXMT8.js";import{C as g,b as q}from"./CFormInput-BKe5CyvR.js";import{C as A}from"./CButton-BtZs5GAv.js";import"./Transition-ilpF5HQZ.js";const W=()=>{const[n,p]=r.useState(""),[c,x]=r.useState(""),[C,f]=r.useState(""),[j,y]=r.useState(""),[i,m]=r.useState(null),[S,d]=r.useState(null),[b,t]=r.useState(!1),k=async()=>{(!n||!c)&&(t(!0),m("Silahkan isi semua kolom dengan benar."),d(null)),t(!0);const a={name:n,image:c};u.post("https://x-yq.xyz/products/categories",a,{headers:{Authorization:"Bearer "+localStorage.getItem("authToken")}}).then(s=>{s.status===201&&(t(!1),d("Category berhasil ditambahkan."),U(s.data))}).catch(s=>{t(!1),m(s.response)})},E=a=>{console.log("Error",a)},U=a=>{t(!1),console.log("Success",a)},N=async()=>{u.get("https://x-yq.xyz/users/image/upload").then(a=>{if(a.status===200){const s=a.data;f(s.secureSignature),y(s.secureExpire),console.log(s)}}).catch(a=>{E("Error fetching signature:")})};return r.useEffect(()=>{N()},[]),e.jsxs(e.Fragment,{children:[e.jsx(T,{children:e.jsx("title",{children:"Tambah Category | Nekoreishion Management"})}),e.jsx(z,{children:e.jsx(l,{className:"justify-content-center",children:e.jsx(o,{md:8,children:e.jsx(B,{children:e.jsxs(I,{children:[e.jsx("h3",{className:"mb-4",children:"Tambah Categories"}),S&&e.jsx(h,{color:"success",children:"Category berhasil ditambahkan!"}),i&&e.jsx(h,{color:"danger",children:i}),e.jsxs(L,{children:[e.jsx(l,{className:"mb-3",children:e.jsxs(o,{md:6,children:[e.jsx(g,{htmlFor:"name",children:"Nama Category"}),e.jsx(q,{type:"text",id:"name",placeholder:"Masukkan nama produk",value:n,onChange:a=>p(a.target.value)})]})}),e.jsx(l,{className:"mb-3",children:e.jsxs(o,{md:12,children:[e.jsx(g,{children:"Unggah Gambar Category Produk"}),e.jsx(v,{pubkey:"ff2ab64366bd0dd50104",maxLocalFileSizeBytes:5e3,multiple:!1,sourceList:"local, url, gdrive",useCloudImageEditor:!1,secureSignature:C,secureExpire:j,onFileUploadStart:()=>t(!0),classNameUploader:"my-config uc-auto",onFileUploadSuccess:a=>{t(!1),x(a.uuid),console.log(a)}})]})}),e.jsx(o,{xs:6,children:b?e.jsx("div",{className:"text-center",children:e.jsx(F,{color:"primary"})}):e.jsx(A,{color:"primary",onClick:k,children:"Tambah Category"})})]})]})})})})})]})};export{W as default};
