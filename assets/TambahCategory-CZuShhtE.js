import{r,j as e,C as F}from"./index-DE3T01yG.js";import"./imagekitio-react.esm-fxVfYFqe.js";import{a as u}from"./sweetalert2.esm.all-TqOIHXHe.js";import{v}from"./FileUploaderInline-Bh2g56u4-p1tJINRr.js";import{H as T}from"./Helmet-BuvS6Zfa.js";import{a as B}from"./CContainer-ChCBiedf.js";import{C as l,a as o}from"./CRow-CRpI6AyE.js";import{C as I,a as L}from"./CCardBody-CC5617-y.js";import{a as h,C as q}from"./CForm--PpKWnVj.js";import{C as g,b as z}from"./CFormInput-CBbAlk0U.js";import{C as A}from"./CButton-CmnYa4XD.js";import"./Transition-avAS3ilv.js";const W=()=>{const[n,p]=r.useState(""),[c,x]=r.useState(""),[C,f]=r.useState(""),[j,y]=r.useState(""),[i,m]=r.useState(null),[S,d]=r.useState(null),[b,t]=r.useState(!1),k=async()=>{(!n||!c)&&(t(!0),m("Silahkan isi semua kolom dengan benar."),d(null)),t(!0);const a={name:n,image:c};u.post("https://x-yq.xy/products/categories",a,{headers:{Authorization:"Bearer "+localStorage.getItem("authToken")}}).then(s=>{s.status===201&&(t(!1),d("Category berhasil ditambahkan."),U(s.data))}).catch(s=>{t(!1),m(s.response)})},E=a=>{console.log("Error",a)},U=a=>{t(!1),console.log("Success",a)},N=async()=>{u.get("https://x-yq.xy/users/image/upload").then(a=>{if(a.status===200){const s=a.data;f(s.secureSignature),y(s.secureExpire),console.log(s)}}).catch(a=>{E("Error fetching signature:")})};return r.useEffect(()=>{N()},[]),e.jsxs(e.Fragment,{children:[e.jsx(T,{children:e.jsx("title",{children:"Tambah Category | Nekoreishion Management"})}),e.jsx(B,{children:e.jsx(l,{className:"justify-content-center",children:e.jsx(o,{md:8,children:e.jsx(I,{children:e.jsxs(L,{children:[e.jsx("h3",{className:"mb-4",children:"Tambah Categories"}),S&&e.jsx(h,{color:"success",children:"Category berhasil ditambahkan!"}),i&&e.jsx(h,{color:"danger",children:i}),e.jsxs(q,{children:[e.jsx(l,{className:"mb-3",children:e.jsxs(o,{md:6,children:[e.jsx(g,{htmlFor:"name",children:"Nama Category"}),e.jsx(z,{type:"text",id:"name",placeholder:"Masukkan nama produk",value:n,onChange:a=>p(a.target.value)})]})}),e.jsx(l,{className:"mb-3",children:e.jsxs(o,{md:12,children:[e.jsx(g,{children:"Unggah Gambar Category Produk"}),e.jsx(v,{pubkey:"ff2ab64366bd0dd50104",maxLocalFileSizeBytes:5e3,multiple:!1,sourceList:"local, url, gdrive",useCloudImageEditor:!1,secureSignature:C,secureExpire:j,onFileUploadStart:()=>t(!0),classNameUploader:"my-config uc-auto",onFileUploadSuccess:a=>{t(!1),x(a.uuid),console.log(a)}})]})}),e.jsx(o,{xs:6,children:b?e.jsx("div",{className:"text-center",children:e.jsx(F,{color:"primary"})}):e.jsx(A,{color:"primary",onClick:k,children:"Tambah Category"})})]})]})})})})})]})};export{W as default};
