import{r,j as e,C as F}from"./index-D78BoYcG.js";import"./imagekitio-react.esm-BTbBLlBj.js";import{a as u}from"./sweetalert2.esm.all-BkWV0ahU.js";import{F as T}from"./FileUploaderInline-3fPmcOmO-BETSKt-n.js";import{H as v}from"./Helmet-COvbvP3y.js";import{a as z,b as B}from"./CContainer-Do9BA3GG.js";import{C as l,a as o}from"./CRow-CyGxND7d.js";import{C as I,a as L}from"./CCardBody-GFE-fcVc.js";import{C as h}from"./CAlert-D1YsfPm2.js";import{C as q}from"./CForm-CWpR11I_.js";import{C as g,b as A}from"./CFormInput-DSRM3zOj.js";import"./Transition-DSsazqEQ.js";const W=()=>{const[n,p]=r.useState(""),[c,x]=r.useState(""),[C,f]=r.useState(""),[j,y]=r.useState(""),[i,m]=r.useState(null),[S,d]=r.useState(null),[b,t]=r.useState(!1),k=async()=>{(!n||!c)&&(t(!0),m("Silahkan isi semua kolom dengan benar."),d(null)),t(!0);const a={name:n,image:c};u.post("https://x-yq.xyz/products/categories",a,{headers:{Authorization:"Bearer "+localStorage.getItem("authToken")}}).then(s=>{s.status===201&&(t(!1),d("Category berhasil ditambahkan."),U(s.data))}).catch(s=>{t(!1),m(s.response)})},E=a=>{console.log("Error",a)},U=a=>{t(!1),console.log("Success",a)},N=async()=>{u.get("https://x-yq.xyz/users/image/upload").then(a=>{if(a.status===200){const s=a.data;f(s.secureSignature),y(s.secureExpire),console.log(s)}}).catch(a=>{E("Error fetching signature:")})};return r.useEffect(()=>{N()},[]),e.jsxs(e.Fragment,{children:[e.jsx(v,{children:e.jsx("title",{children:"Tambah Category | Nekoreishion Management"})}),e.jsx(z,{children:e.jsx(l,{className:"justify-content-center",children:e.jsx(o,{md:8,children:e.jsx(I,{children:e.jsxs(L,{children:[e.jsx("h3",{className:"mb-4",children:"Tambah Categories"}),S&&e.jsx(h,{color:"success",children:"Category berhasil ditambahkan!"}),i&&e.jsx(h,{color:"danger",children:i}),e.jsxs(q,{children:[e.jsx(l,{className:"mb-3",children:e.jsxs(o,{md:6,children:[e.jsx(g,{htmlFor:"name",children:"Nama Category"}),e.jsx(A,{type:"text",id:"name",placeholder:"Masukkan nama produk",value:n,onChange:a=>p(a.target.value)})]})}),e.jsx(l,{className:"mb-3",children:e.jsxs(o,{md:12,children:[e.jsx(g,{children:"Unggah Gambar Category Produk"}),e.jsx(T,{pubkey:"ff2ab64366bd0dd50104",maxLocalFileSizeBytes:2e6,multiple:!1,sourceList:"local, url, gdrive",useCloudImageEditor:!1,secureSignature:C,secureExpire:j,onFileUploadStart:()=>t(!0),classNameUploader:"my-config uc-auto",onFileUploadSuccess:a=>{t(!1),x(a.uuid),console.log(a)}})]})}),e.jsx(o,{xs:6,children:b?e.jsx("div",{className:"text-center",children:e.jsx(F,{color:"primary"})}):e.jsx(B,{color:"primary",onClick:k,children:"Tambah Category"})})]})]})})})})})]})};export{W as default};
