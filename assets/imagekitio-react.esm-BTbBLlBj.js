import{P as p,R as ue,r as A}from"./index-D78BoYcG.js";function Q(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Q=function(t){return typeof t}:Q=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(e)}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Te(e,t,r){return t&&Ae(e.prototype,t),e}function ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ce(Object(r),!0).forEach(function(n){ye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ce(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _e(e,t){if(e){if(typeof e=="string")return le(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return le(e,t)}}function le(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ne(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=_e(e))||t){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(c){throw c},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s=!0,d=!1,m;return{s:function(){r=e[Symbol.iterator]()},n:function(){var c=r.next();return s=c.done,c},e:function(c){d=!0,m=c},f:function(){try{!s&&r.return!=null&&r.return()}finally{if(d)throw m}}}}var xe="3.0.2",_={MANDATORY_INITIALIZATION_MISSING:{message:"Missing urlEndpoint during SDK initialization",help:""},INVALID_TRANSFORMATION_POSITION:{message:"Invalid transformationPosition parameter",help:""},PRIVATE_KEY_CLIENT_SIDE:{message:"privateKey should not be passed on the client side",help:""},MISSING_UPLOAD_DATA:{message:"Missing data for upload",help:""},MISSING_UPLOAD_FILE_PARAMETER:{message:"Missing file parameter for upload",help:""},MISSING_UPLOAD_FILENAME_PARAMETER:{message:"Missing fileName parameter for upload",help:""},MISSING_AUTHENTICATION_ENDPOINT:{message:"Missing authentication endpoint for upload",help:""},MISSING_PUBLIC_KEY:{message:"Missing public key for upload",help:""},AUTH_ENDPOINT_TIMEOUT:{message:"The authenticationEndpoint you provided timed out in 60 seconds",help:""},AUTH_ENDPOINT_NETWORK_ERROR:{message:"Request to authenticationEndpoint failed due to network error",help:""},AUTH_INVALID_RESPONSE:{message:"Invalid response from authenticationEndpoint. The SDK expects a JSON response with three fields i.e. signature, token and expire.",help:""},UPLOAD_ENDPOINT_NETWORK_ERROR:{message:"Request to ImageKit upload endpoint failed due to network error",help:""},INVALID_UPLOAD_OPTIONS:{message:"Invalid uploadOptions parameter",help:""},MISSING_SIGNATURE:{message:"Missing signature for upload. The SDK expects token, signature and expire for authentication.",help:""},MISSING_TOKEN:{message:"Missing token for upload. The SDK expects token, signature and expire for authentication.",help:""},MISSING_EXPIRE:{message:"Missing expire for upload. The SDK expects token, signature and expire for authentication.",help:""},INVALID_TRANSFORMATION:{message:"Invalid transformation parameter. Please include at least pre, post, or both.",help:""},INVALID_PRE_TRANSFORMATION:{message:"Invalid pre transformation parameter.",help:""},INVALID_POST_TRANSFORMATION:{message:"Invalid post transformation parameter.",help:""}};function N(e,t,r){typeof r=="function"&&(e?r(t,null):r(null,t))}function Me(e){var t={},r=e.getAllResponseHeaders();return Object.keys(r).length&&r.trim().split(/[\r\n]+/).map(function(n){return n.split(/: /)}).forEach(function(n){t[n[0].trim()]=n[1].trim()}),t}var de=function(t,r){var n=J({},t),a={statusCode:r.status,headers:Me(r)};return Object.defineProperty(n,"$ResponseMetadata",{value:a,enumerable:!1,writable:!1}),n},Re=function(t,r,n){Le(t,r).then(function(a){return N(!1,a,n)},function(a){return N(!0,a,n)})},Le=function(t,r){return new Promise(function(n,a){t.open("POST","https://upload.imagekit.io/api/v1/files/upload"),t.onerror=function(s){return a(_.UPLOAD_ENDPOINT_NETWORK_ERROR)},t.onload=function(){if(t.status===200)try{var s=JSON.parse(t.responseText),d=de(s,t);return n(d)}catch(c){return a(c)}else try{var s=JSON.parse(t.responseText),m=de(s,t);return a(m)}catch(c){return a(c)}},t.send(r)})},Ce=function(t,r,n,a){if(!r.file){N(!0,_.MISSING_UPLOAD_FILE_PARAMETER,a);return}if(!r.fileName){N(!0,_.MISSING_UPLOAD_FILENAME_PARAMETER,a);return}if(!n.publicKey){N(!0,_.MISSING_PUBLIC_KEY,a);return}if(!r.token){N(!0,_.MISSING_TOKEN,a);return}if(!r.signature){N(!0,_.MISSING_SIGNATURE,a);return}if(!r.expire){N(!0,_.MISSING_EXPIRE,a);return}if(r.transformation){if(!(Object.keys(r.transformation).includes("pre")||Object.keys(r.transformation).includes("post"))){N(!0,_.INVALID_TRANSFORMATION,a);return}if(Object.keys(r.transformation).includes("pre")&&!r.transformation.pre){N(!0,_.INVALID_PRE_TRANSFORMATION,a);return}if(Object.keys(r.transformation).includes("post"))if(Array.isArray(r.transformation.post)){var s=Ne(r.transformation.post),d;try{for(s.s();!(d=s.n()).done;){var m=d.value;if(m.type==="abs"&&!(m.protocol||m.value)){N(!0,_.INVALID_POST_TRANSFORMATION,a);return}else if(m.type==="transformation"&&!m.value){N(!0,_.INVALID_POST_TRANSFORMATION,a);return}}}catch(S){s.e(S)}finally{s.f()}}else{N(!0,_.INVALID_POST_TRANSFORMATION,a);return}}var c=new FormData,h;for(h in r)h&&(h==="file"&&typeof r.file!="string"?c.append("file",r.file,String(r.fileName)):h==="tags"&&Array.isArray(r.tags)?c.append("tags",r.tags.join(",")):h==="signature"?c.append("signature",r.signature):h==="expire"?c.append("expire",String(r.expire)):h==="token"?c.append("token",r.token):h==="responseFields"&&Array.isArray(r.responseFields)?c.append("responseFields",r.responseFields.join(",")):h==="extensions"&&Array.isArray(r.extensions)?c.append("extensions",JSON.stringify(r.extensions)):h==="customMetadata"&&Q(r.customMetadata)==="object"&&!Array.isArray(r.customMetadata)&&r.customMetadata!==null?c.append("customMetadata",JSON.stringify(r.customMetadata)):h==="transformation"&&Q(r.transformation)==="object"&&r.transformation!==null?c.append(h,JSON.stringify(r.transformation)):h==="checks"&&r.checks?c.append("checks",r.checks):r[h]!==void 0&&c.append(h,String(r[h])));c.append("publicKey",n.publicKey),Re(t,c,a)},he={width:"w",height:"h",aspectRatio:"ar",quality:"q",crop:"c",cropMode:"cm",focus:"fo",x:"x",y:"y",format:"f",radius:"r",background:"bg",border:"b",rotation:"rt",rotate:"rt",blur:"bl",named:"n",progressive:"pr",lossless:"lo",trim:"t",metadata:"md",colorProfile:"cp",defaultImage:"di",dpr:"dpr",effectSharpen:"e-sharpen",effectUSM:"e-usm",effectContrast:"e-contrast",effectGray:"e-grayscale",original:"orig",effectShadow:"e-shadow",effectGradient:"e-gradient",raw:"raw"},pe="path",Ie="query",je=[pe,Ie],De=":",Ke=",",Ue="-",Y={getDefault:function(){return pe},addAsQueryParameter:function(t){return t.transformationPosition===Ie},validParameters:function(t){return typeof t.transformationPosition>"u"?!1:je.indexOf(t.transformationPosition)!=-1},getTransformKey:function(t){return t&&(he[t]||he[t.toLowerCase()])||""},getChainTransformDelimiter:function(){return De},getTransformDelimiter:function(){return Ke},getTransformKeyValueDelimiter:function(){return Ue}},me="tr";function Fe(e){return typeof e=="string"&&e[e.length-1]=="/"&&(e=e.substring(0,e.length-1)),e}function qe(e){return typeof e=="string"&&e[0]=="/"&&(e=e.slice(1)),e}function ee(e,t){var r="/",n=new RegExp(r+"{1,}","g");return e.join(r).replace(n,r)}var ke=function(t){if(!t.path&&!t.src)return"";var r,n,a;try{t.path?(a=new URL(t.urlEndpoint).pathname,r=new URL(ee([t.urlEndpoint.replace(a,""),t.path]))):(r=new URL(t.src),n=!0)}catch(m){return console.error(m),""}for(var s in t.queryParameters)r.searchParams.append(s,String(t.queryParameters[s]));var d=Ge(t.transformation);return d&&d.length&&(Y.addAsQueryParameter(t)||n?r.searchParams.append(me,d):r.pathname=ee([me+Y.getChainTransformDelimiter()+d,r.pathname])),a?r.pathname=ee([a,r.pathname]):r.pathname=ee([r.pathname]),r.href};function Ge(e){if(!Array.isArray(e))return"";for(var t=[],r=0,n=e.length;r<n;r++){var a=[];for(var s in e[r])if(!(e[r][s]===void 0||e[r][s]===null)){var d=Y.getTransformKey(s);if(d||(d=s),e[r][s]==="-")a.push(d);else if(s==="raw")a.push(e[r][s]);else{var m=e[r][s];d==="di"&&(m=Fe(qe(m||"")),m=m.replace(/\//g,"@@")),a.push([d,m].join(Y.getTransformKeyValueDelimiter()))}}t.push(a.join(Y.getTransformDelimiter()))}return t.join(Y.getChainTransformDelimiter())}var Ve=function(t,r){return ke(J(J({},r),t))};function $e(e){return e.urlEndpoint}var ze=function(t,r){return function(){for(var n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];if(a.length===r.length&&typeof a[a.length-1]<"u"){if(typeof a[a.length-1]!="function")throw new Error("Callback must be a function.");r.call.apply(r,[t].concat(a))}else return new Promise(function(d,m){var c=function(S){if(S)return m(S);for(var b=arguments.length,P=new Array(b>1?b-1:0),L=1;L<b;L++)P[L-1]=arguments[L];d(P.length>1?P:P[0])};a.pop(),a.push(c),r.call.apply(r,[t].concat(a))})}},se=function(){function e(t){if(Oe(this,e),ye(this,"options",{sdkVersion:"javascript-".concat(xe),publicKey:"",urlEndpoint:"",transformationPosition:Y.getDefault()}),this.options=J(J({},this.options),t||{}),!$e(this.options))throw _.MANDATORY_INITIALIZATION_MISSING;if(!Y.validParameters(this.options))throw _.INVALID_TRANSFORMATION_POSITION}return Te(e,[{key:"url",value:function(r){return Ve(r,this.options)}},{key:"upload",value:function(r,n,a){var s;if(typeof n=="function"?s=n:a=n||{},!r||Q(r)!=="object")return N(!0,_.INVALID_UPLOAD_OPTIONS,s);var d=J(J({},this.options),a),m=r||{},c=m.xhr;delete r.xhr;var h=c||new XMLHttpRequest;return ze(this,Ce)(h,r,d,s)}}]),e}();function Ye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,s,d,m=[],c=!0,h=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(m.push(n.value),m.length!==t);c=!0);}catch(S){h=!0,a=S}finally{try{if(!c&&r.return!=null&&(d=r.return(),Object(d)!==d))return}finally{if(h)throw a}}return m}}function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function R(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ve(Object(r),!0).forEach(function(n){Be(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ie(){ie=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(o,i,u){o[i]=u.value},s=typeof Symbol=="function"?Symbol:{},d=s.iterator||"@@iterator",m=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function h(o,i,u){return Object.defineProperty(o,i,{value:u,enumerable:!0,configurable:!0,writable:!0}),o[i]}try{h({},"")}catch{h=function(i,u,v){return i[u]=v}}function S(o,i,u,v){var f=i&&i.prototype instanceof K?i:K,l=Object.create(f.prototype),y=new M(v||[]);return a(l,"_invoke",{value:Z(o,u,y)}),l}function b(o,i,u){try{return{type:"normal",arg:o.call(i,u)}}catch(v){return{type:"throw",arg:v}}}t.wrap=S;var P="suspendedStart",L="suspendedYield",k="executing",x="completed",g={};function K(){}function G(){}function C(){}var U={};h(U,d,function(){return this});var H=Object.getPrototypeOf,V=H&&H(H(D([])));V&&V!==r&&n.call(V,d)&&(U=V);var j=C.prototype=K.prototype=Object.create(U);function $(o){["next","throw","return"].forEach(function(i){h(o,i,function(u){return this._invoke(i,u)})})}function F(o,i){function u(f,l,y,I){var w=b(o[f],o,l);if(w.type!=="throw"){var E=w.arg,T=E.value;return T&&typeof T=="object"&&n.call(T,"__await")?i.resolve(T.__await).then(function(O){u("next",O,y,I)},function(O){u("throw",O,y,I)}):i.resolve(T).then(function(O){E.value=O,y(E)},function(O){return u("throw",O,y,I)})}I(w.arg)}var v;a(this,"_invoke",{value:function(f,l){function y(){return new i(function(I,w){u(f,l,I,w)})}return v=v?v.then(y,y):y()}})}function Z(o,i,u){var v=P;return function(f,l){if(v===k)throw new Error("Generator is already running");if(v===x){if(f==="throw")throw l;return{value:e,done:!0}}for(u.method=f,u.arg=l;;){var y=u.delegate;if(y){var I=W(y,u);if(I){if(I===g)continue;return I}}if(u.method==="next")u.sent=u._sent=u.arg;else if(u.method==="throw"){if(v===P)throw v=x,u.arg;u.dispatchException(u.arg)}else u.method==="return"&&u.abrupt("return",u.arg);v=k;var w=b(o,i,u);if(w.type==="normal"){if(v=u.done?x:L,w.arg===g)continue;return{value:w.arg,done:u.done}}w.type==="throw"&&(v=x,u.method="throw",u.arg=w.arg)}}}function W(o,i){var u=i.method,v=o.iterator[u];if(v===e)return i.delegate=null,u==="throw"&&o.iterator.return&&(i.method="return",i.arg=e,W(o,i),i.method==="throw")||u!=="return"&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+u+"' method")),g;var f=b(v,o.iterator,i.arg);if(f.type==="throw")return i.method="throw",i.arg=f.arg,i.delegate=null,g;var l=f.arg;return l?l.done?(i[o.resultName]=l.value,i.next=o.nextLoc,i.method!=="return"&&(i.method="next",i.arg=e),i.delegate=null,g):l:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function B(o){var i={tryLoc:o[0]};1 in o&&(i.catchLoc=o[1]),2 in o&&(i.finallyLoc=o[2],i.afterLoc=o[3]),this.tryEntries.push(i)}function q(o){var i=o.completion||{};i.type="normal",delete i.arg,o.completion=i}function M(o){this.tryEntries=[{tryLoc:"root"}],o.forEach(B,this),this.reset(!0)}function D(o){if(o||o===""){var i=o[d];if(i)return i.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length)){var u=-1,v=function f(){for(;++u<o.length;)if(n.call(o,u))return f.value=o[u],f.done=!1,f;return f.value=e,f.done=!0,f};return v.next=v}}throw new TypeError(typeof o+" is not iterable")}return G.prototype=C,a(j,"constructor",{value:C,configurable:!0}),a(C,"constructor",{value:G,configurable:!0}),G.displayName=h(C,c,"GeneratorFunction"),t.isGeneratorFunction=function(o){var i=typeof o=="function"&&o.constructor;return!!i&&(i===G||(i.displayName||i.name)==="GeneratorFunction")},t.mark=function(o){return Object.setPrototypeOf?Object.setPrototypeOf(o,C):(o.__proto__=C,h(o,c,"GeneratorFunction")),o.prototype=Object.create(j),o},t.awrap=function(o){return{__await:o}},$(F.prototype),h(F.prototype,m,function(){return this}),t.AsyncIterator=F,t.async=function(o,i,u,v,f){f===void 0&&(f=Promise);var l=new F(S(o,i,u,v),f);return t.isGeneratorFunction(i)?l:l.next().then(function(y){return y.done?y.value:l.next()})},$(j),h(j,c,"Generator"),h(j,d,function(){return this}),h(j,"toString",function(){return"[object Generator]"}),t.keys=function(o){var i=Object(o),u=[];for(var v in i)u.push(v);return u.reverse(),function f(){for(;u.length;){var l=u.pop();if(l in i)return f.value=l,f.done=!1,f}return f.done=!0,f}},t.values=D,M.prototype={constructor:M,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(q),!o)for(var i in this)i.charAt(0)==="t"&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var o=this.tryEntries[0].completion;if(o.type==="throw")throw o.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var i=this;function u(w,E){return l.type="throw",l.arg=o,i.next=w,E&&(i.method="next",i.arg=e),!!E}for(var v=this.tryEntries.length-1;v>=0;--v){var f=this.tryEntries[v],l=f.completion;if(f.tryLoc==="root")return u("end");if(f.tryLoc<=this.prev){var y=n.call(f,"catchLoc"),I=n.call(f,"finallyLoc");if(y&&I){if(this.prev<f.catchLoc)return u(f.catchLoc,!0);if(this.prev<f.finallyLoc)return u(f.finallyLoc)}else if(y){if(this.prev<f.catchLoc)return u(f.catchLoc,!0)}else{if(!I)throw new Error("try statement without catch or finally");if(this.prev<f.finallyLoc)return u(f.finallyLoc)}}}},abrupt:function(o,i){for(var u=this.tryEntries.length-1;u>=0;--u){var v=this.tryEntries[u];if(v.tryLoc<=this.prev&&n.call(v,"finallyLoc")&&this.prev<v.finallyLoc){var f=v;break}}f&&(o==="break"||o==="continue")&&f.tryLoc<=i&&i<=f.finallyLoc&&(f=null);var l=f?f.completion:{};return l.type=o,l.arg=i,f?(this.method="next",this.next=f.finallyLoc,g):this.complete(l)},complete:function(o,i){if(o.type==="throw")throw o.arg;return o.type==="break"||o.type==="continue"?this.next=o.arg:o.type==="return"?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):o.type==="normal"&&i&&(this.next=i),g},finish:function(o){for(var i=this.tryEntries.length-1;i>=0;--i){var u=this.tryEntries[i];if(u.finallyLoc===o)return this.complete(u.completion,u.afterLoc),q(u),g}},catch:function(o){for(var i=this.tryEntries.length-1;i>=0;--i){var u=this.tryEntries[i];if(u.tryLoc===o){var v=u.completion;if(v.type==="throw"){var f=v.arg;q(u)}return f}}throw new Error("illegal catch attempt")},delegateYield:function(o,i,u){return this.delegate={iterator:D(o),resultName:i,nextLoc:u},this.method==="next"&&(this.arg=e),g}},t}function He(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function We(e){var t=He(e,"string");return typeof t=="symbol"?t:String(t)}function ae(e){"@babel/helpers - typeof";return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(e)}function ge(e,t,r,n,a,s,d){try{var m=e[s](d),c=m.value}catch(h){r(h);return}m.done?t(c):Promise.resolve(c).then(n,a)}function Je(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var s=e.apply(t,r);function d(c){ge(s,n,a,d,m,"next",c)}function m(c){ge(s,n,a,d,m,"throw",c)}d(void 0)})}}function Be(e,t,r){return t=We(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(this,arguments)}function Qe(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,s;for(s=0;s<n.length;s++)a=n[s],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Se(e,t){if(e==null)return{};var r=Qe(e,t),n,a;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(a=0;a<s.length;a++)n=s[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function z(e,t){return et(e)||Ye(e,t)||be(e,t)||nt()}function Ze(e){return Xe(e)||tt(e)||be(e)||rt()}function Xe(e){if(Array.isArray(e))return oe(e)}function et(e){if(Array.isArray(e))return e}function tt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function be(e,t){if(e){if(typeof e=="string")return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oe(e,t)}}function oe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var fe={publicKey:p.string,urlEndpoint:p.string,authenticator:p.func},it=R(R({},fe),{},{transformationPosition:p.oneOf(["path","query"])}),at=R(R({},it),{},{ikClient:p.instanceOf(se)}),re=A.createContext({}),gt=function(t){var r=function(d){for(var m={},c=Object.keys(at),h=0;h<c.length;h++){var S=c[h],b=d[S];b&&(m[S]=b)}return m},n=R({},t),a=r(n);return a.urlEndpoint&&a.urlEndpoint.trim()!==""&&(a.ikClient=new se({urlEndpoint:a.urlEndpoint,sdkVersion:""})),ue.createElement(re.Provider,{value:a},t.children)},ot={loading:p.oneOf(["lazy"]),lqip:p.shape({active:p.bool,quality:p.number,threshold:p.number,blur:p.number,raw:p.string}),path:p.string,src:p.string,queryParameters:p.objectOf(p.oneOfType([p.string,p.number]).isRequired),transformation:p.arrayOf(p.object.isRequired),transformationPosition:p.oneOf(["path","query"])},ut=R(R({},fe),ot),st=function(){try{return navigator.connection.effectiveType}catch{return"4g"}},ft=function(t,r,n){var a=t.urlEndpoint,s=t.lqip,d=t.src,m=t.path,c=t.transformation,h=t.transformationPosition,S=t.queryParameters,b;if(d)b={urlEndpoint:a||n.urlEndpoint,src:d,transformation:c||void 0,transformationPosition:h||n.transformationPosition||void 0,queryParameters:S||{}};else if(m)b={urlEndpoint:a||n.urlEndpoint,path:m,transformation:c||void 0,transformationPosition:h||n.transformationPosition||void 0,queryParameters:S||{}};else return{originalSrc:""};var P={originalSrc:r.url(b)};if(s&&s.active){var L=Math.round(s.quality||s.threshold||20),k=Math.round(s.blur||6),x=b.transformation?Ze(b.transformation):[];s.raw&&typeof s.raw=="string"&&s.raw.trim()!==""?x.push({raw:s.raw.trim()}):x.push({quality:String(L),blur:String(k)}),P.lqipSrc=r.url(R(R({},b),{},{transformation:x}))}return P},ct=function(t,r){var n=t.lqip,a=n===void 0?null:n,s=t.loading,d=r.intersected,m=r.originalSrcLoaded,c=r.originalSrc,h=r.lqipSrc,S=function(P){return P&&P.active};return s!=="lazy"&&!S(a)?c:s!=="lazy"&&S(a)?m?c:h:s==="lazy"&&!S(a)?d?c:"":d&&m?c:h},we=function(t){var r=A.useContext(re),n=function(){if(r&&r.ikClient)return r.ikClient;var s=t.urlEndpoint;if(s=s||r&&r.urlEndpoint,!s||s.trim()==="")throw new Error("Missing urlEndpoint during initialization");var d=new se({urlEndpoint:s,sdkVersion:""});return d};return{getIKClient:n}},lt=["urlEndpoint","authenticator","publicKey","loading","lqip","path","src","transformation","transformationPosition","queryParameters"],dt=function(t){var r=A.useRef(null),n=we(R({},t)),a=n.getIKClient,s=A.useContext(re),d=A.useState(void 0),m=z(d,2),c=m[0],h=m[1],S=A.useState(""),b=z(S,2),P=b[0],L=b[1],k=A.useState(""),x=z(k,2),g=x[0],K=x[1],G=A.useState(!1),C=z(G,2),U=C[0],H=C[1],V=A.useState(void 0),j=z(V,2),$=j[0],F=j[1],Z=A.useState(!1),W=z(Z,2),B=W[0],q=W[1],M=A.useState(!1),D=z(M,2),o=D[0],i=D[1];A.useEffect(function(){var l=ft(t,a(),s),y=l.originalSrc,I=l.lqipSrc;L(y),K(I||""),q(!0)},[s,t]);var u=function(){var l=Je(ie().mark(function y(){var I;return ie().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,ct(t,{originalSrc:P,lqipSrc:g,intersected:o,contextOptions:s,initialzeState:B,originalSrcLoaded:U,observe:$});case 2:I=E.sent,I&&h(I);case 4:case"end":return E.stop()}},y)}));return function(){return l.apply(this,arguments)}}(),v=function(){var y=new Image;y.onload=function(){H(!0)},y.src=P};A.useEffect(function(){U&&u()},[U]),A.useEffect(function(){var l=r.current,y=t.loading;if(B)if(window&&"IntersectionObserver"in window&&y==="lazy"){var I=st(),w="1250px";I!=="4g"&&(w="2500px");var E=new IntersectionObserver(function(T){var O=T[0];O&&O.isIntersecting&&!o&&(i(!0),F(function(X){X&&X.disconnect()}),v(),u())},{rootMargin:"".concat(w," 0px ").concat(w," 0px")});l&&(E.observe(l),F(E))}else i(!0),v(),u();return function(){$&&$.disconnect()}},[t,P,g]),t.urlEndpoint,t.authenticator,t.publicKey,t.loading,t.lqip,t.path,t.src,t.transformation,t.transformationPosition,t.queryParameters;var f=Se(t,lt);return ue.createElement("img",te({alt:t.alt||"",src:c||"",ref:r},f))};dt.propTypes=ut;var ht={path:p.string,src:p.string,queryParameters:p.objectOf(p.oneOfType([p.string,p.number]).isRequired),transformation:p.arrayOf(p.object.isRequired),transformationPosition:p.oneOf(["path","query"])};R(R({},fe),ht);var mt=["publicKey","urlEndpoint","authenticator","fileName","useUniqueFileName","tags","folder","isPrivateFile","customCoordinates","responseFields","onError","onSuccess","onUploadStart","onUploadProgress","validateFile","webhookUrl","overwriteFile","overwriteAITags","overwriteTags","overwriteCustomMetadata","extensions","customMetadata","transformation","checks","overrideParameters"],yt=A.forwardRef(function(e,t){var r=A.useState({}),n=z(r,2),a=n[0],s=n[1],d=A.useContext(re),m=we(R({},e)),c=m.getIKClient;A.useEffect(function(){var q=function(){a.xhr&&a.xhr.abort()};if(t&&ae(t)==="object"&&t.hasOwnProperty("current")){var M=t;M.current.abort=q}},[a.xhr,t]),e.publicKey,e.urlEndpoint,e.authenticator;var h=e.fileName,S=e.useUniqueFileName,b=e.tags,P=e.folder,L=e.isPrivateFile,k=e.customCoordinates,x=e.responseFields,g=e.onError,K=e.onSuccess;e.onUploadStart,e.onUploadProgress,e.validateFile;var G=e.webhookUrl,C=e.overwriteFile,U=e.overwriteAITags,H=e.overwriteTags,V=e.overwriteCustomMetadata,j=e.extensions,$=e.customMetadata,F=e.transformation,Z=e.checks;e.overrideParameters;var W=Se(e,mt),B=function(M){var D,o=e.publicKey||d.publicKey,i=e.authenticator||d.authenticator,u=e.urlEndpoint||d.urlEndpoint;if(!o||o.trim()===""){console.error("Missing publicKey"),g&&typeof g=="function"&&g({message:"Missing publicKey"});return}if(!i){console.error("The authenticator function is not provided."),g&&typeof g=="function"&&g({message:"The authenticator function is not provided."});return}if(typeof i!="function"){console.error("The provided authenticator is not a function."),g&&typeof g=="function"&&g({message:"The provided authenticator is not a function."});return}if(!u||u.trim()===""){console.error("Missing urlEndpoint"),g&&typeof g=="function"&&g({message:"Missing urlEndpoint"});return}var v=c(),f=(D=M.target.files)===null||D===void 0?void 0:D[0];if(f&&!(e.validateFile&&!e.validateFile(f))){e.onUploadStart&&typeof e.onUploadStart=="function"&&e.onUploadStart(M);var l={};e.overrideParameters&&typeof e.overrideParameters=="function"&&(l=e.overrideParameters(f)||{});var y=new XMLHttpRequest,I=function(O){e.onUploadProgress&&typeof e.onUploadProgress=="function"&&e.onUploadProgress(O)};y.upload.addEventListener("progress",I);var w={file:f,fileName:l.fileName||h||f.name,useUniqueFileName:l.useUniqueFileName||S,tags:l.tags||b,folder:l.folder||P,isPrivateFile:l.isPrivateFile||L,customCoordinates:l.customCoordinates||k,responseFields:x,extensions:l.extensions||j,webhookUrl:l.webhookUrl||G,overwriteFile:l.overwriteFile||C,overwriteAITags:l.overwriteAITags||U,overwriteTags:l.overwriteTags||H,overwriteCustomMetadata:l.overwriteCustomMetadata||V,customMetadata:l.customMetadata||$,signature:"",expire:0,token:"",xhr:y,transformation:l.transformation||F,checks:l.checks||Z},E=i();if(!(E instanceof Promise)){g&&typeof g=="function"&&g({message:"The authenticator function is expected to return a Promise instance."});return}E.then(function(T){var O=T.signature,X=T.token,Pe=T.expire;w.signature=O,w.expire=Pe,w.token=X,v.upload(w,function(ne,Ee){ne?g&&typeof g=="function"&&(console.log(ne),g(ne)):K&&typeof K=="function"&&K(Ee),y.upload.removeEventListener("progress",I)},{publicKey:o}),s({xhr:y})}).catch(function(T){var O;T instanceof Array?O=T[0]:O=T,g&&typeof g=="function"&&g({message:String(O)})})}};return ue.createElement("input",te({},W,{ref:t,type:"file",onChange:function(M){e.onChange&&typeof e.onChange=="function"&&e.onChange(M),B(M)}}))});export{gt as I,yt as a,dt as b};
